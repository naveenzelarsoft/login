pipeline {
  agent {
             label 'dev'
          }
    stages {
     stage ('Get Dependencies'){
     steps{
          sh '''
          go get github.com/dgrijalva/jwt-go
          go get github.com/labstack/echo
          go get github.com/labstack/echo/middleware
          go get github.com/labstack/gommon/log
          go get github.com/openzipkin/zipkin-go
          go get github.com/openzipkin/zipkin-go/middleware/http
          go get github.com/openzipkin/zipkin-go/reporter/http
          '''
         }
      }

      stage ('Build Packages'){
      steps {
          sh '''
           go build
          '''
        }
      }
      stage ('Prepare Artifacts') {
        steps {
          sh '''
             zip -r login.zip Login
          '''
          }
        }
     stage ('Upload Artifact') {
        steps {
        sh '''
          curl -v -u admin:admin --upload-file login.zip http://3.208.90.51:8081/repository/login/login.zip
         
           ''' 
          }
        }
     }
  }
